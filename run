#!/bin/sh

export TIME="--- finished in %E ---"
run_day() {
	cd "$1"
	if [ "$TEST" = 1 ]; then
		MSG="Testing"
		INPUT="test.txt"
	else
		MSG="Running"
		INPUT="input.txt"
	fi
	echo "----- $MSG day $1 -----"
	for file in solution*.py; do
		echo "--- File $file ---"
		time python "$file" < $INPUT
	done
	cd ..
}

if [ "$1" = "-t" ]; then
	export TEST=1
	shift 
fi

if [ "$#" -gt 0 ]; then
	day="$1"
	if echo "$day" | grep -q '^[1-9]$'; then
		day=0"$day"		
	fi
	run_day "$day"
else
	for dir in *; do
		if [ -d "$dir" ]; then
			run_day "$dir"
			echo
		fi
	done
fi
